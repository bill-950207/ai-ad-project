# 크레딧 시스템 가이드

## 크레딧 구간별 정리

### 구간 1: 기본 이미지 생성 (1-3 크레딧)

| 기능 | 크레딧 | 실제 비용 | 무료 한도 | 비고 |
|------|-------|---------|----------|------|
| 아바타 생성 | 1 | ~$0.02 | 월 3회 | Kie.ai Z-Image |
| 배경 생성 | 1 | ~$0.02 | - | Kie.ai Z-Image |
| 제품 등록 | 1 | ~$0.02 | 월 5회 | 배경 제거 포함 |
| 의상 교체 | 2 | ~$0.05 | - | Seedream 4.5 |
| 이미지 광고 (medium) | 2 | ~$0.05 | - | Seedream 4.5 |
| 이미지 광고 (high) | 3 | ~$0.08 | - | Seedream 4.5 |
| 키프레임 이미지 | 3 | ~$0.08 | - | Seedream 4.5 (씬당) |
| 음악 생성 | 3 | ~$0.15 | 월 2회 | Suno V5 |

### 구간 2: 제품 광고 영상 (8-20 크레딧)

#### Seedance 모델
| 길이 | 크레딧 | 실제 비용 |
|------|-------|---------|
| 4초 | 8 | ~$0.30 |
| 8초 | 12 | ~$0.50 |
| 12초 | 16 | ~$0.70 |

#### Wan 2.6 모델
| 길이 | 크레딧 | 실제 비용 |
|------|-------|---------|
| 5초 | 10 | ~$0.40 |
| 10초 | 15 | ~$0.60 |
| 15초 | 20 | ~$0.80 |

### 구간 3: 고급 영상 생성 (10-60 크레딧)

| 기능 | 크레딧 | 실제 비용 | AI 모델 |
|------|-------|---------|--------|
| 제품 설명 영상 (토킹) | 10 | ~$0.40 | WaveSpeed/Kling Avatar |
| 씬 전환 영상 | 12 | ~$0.50 | Kling O1 (1개당) |
| 아바타 모션 5초 | 40 | ~$0.50 | Kling 2.6 |
| 아바타 모션 10초 | 60 | ~$0.80 | Kling 2.6 |

---

## 영상 워크플로우별 총 크레딧

### 제품 광고 영상 (Product-Ad)

```
Step 5: 키프레임 생성
  └─ 3크레딧 × 씬 개수

Step 6: 영상 생성
  ├─ 씬별 영상: 8~20크레딧 × 씬 개수
  └─ 씬 전환: 12크레딧 × (씬 개수 - 1)
```

**예시: 4씬 영상 (Wan 2.6, 5초/씬)**
| 단계 | 계산 | 크레딧 |
|------|-----|-------|
| 키프레임 | 3 × 4 | 12 |
| 씬 영상 | 10 × 4 | 40 |
| 씬 전환 | 12 × 3 | 36 |
| **합계** | | **88** |

### 아바타 모션 영상 (Avatar-Motion)

```
Step 5: 프레임 생성
  └─ 3크레딧 × 씬 개수 (키프레임)

Step 6: 영상 생성
  └─ 40~60크레딧 (5초/10초)
```

**예시: 3씬 × 5초**
| 단계 | 계산 | 크레딧 |
|------|-----|-------|
| 키프레임 | 3 × 3 | 9 |
| 영상 | 40 × 3 | 120 |
| **합계** | | **129** |

### 제품 설명 영상 (토킹)

```
TTS 음성 생성: 0 (무료)
토킹 영상 생성: 10크레딧
```

---

## 무료 기능

| 기능 | 설명 |
|------|------|
| 배경 제거 | Kie.ai Recraft (~$0.01) |
| TTS 음성 | WaveSpeed Minimax |
| 영상 병합 | FFmpeg 서버 처리 |

---

## 크레딧 환불

실패한 작업은 자동 환불 (FAILED 상태):
- 이미지 광고: 품질별 크레딧 환불
- 영상 생성: 해당 크레딧 환불

---

## 월간 무료 한도 (구독 플랜별)

| 기능 | FREE | BASIC | PRO |
|------|------|-------|-----|
| 아바타 생성 | 3회 | 10회 | 무제한 |
| 제품 등록 | 5회 | 20회 | 무제한 |
| 음악 생성 | 2회 | 10회 | 무제한 |

---

## API 크레딧 차감 목록

| API | 크레딧 | 조건 |
|-----|-------|------|
| `POST /api/avatars` | 1 | 무료 한도 초과 시 |
| `POST /api/avatars/[id]/outfits` | 2 | 항상 |
| `POST /api/image-ads` | 2-3×N | 항상 |
| `POST /api/image-ads/[id]/edit` | 2-3 | 항상 |
| `POST /api/ad-products` | 1 | 무료 한도 초과 시 |
| `POST /api/ad-music` | 3 | 무료 한도 초과 시 |
| `POST /api/ad-backgrounds` | 1 | 항상 |
| `POST /api/product-ad/generate-keyframes` | 3×N | 항상 |
| `POST /api/product-ad/generate-video` | 8-20×M | 항상 |
| `POST /api/product-ad/generate-transitions` | 12×N | 항상 |
| `POST /api/avatar-motion/generate-video` | 40-60 | 항상 |
| `POST /api/video-ads/.../generate-video` | 10 | 항상 |

*N = 씬/이미지 개수, M = 배치 영상 개수*
